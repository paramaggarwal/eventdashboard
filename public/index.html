
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8"/>
  <link rel="icon" href="/favicon.ico" type="image/x-icon"/>
  <link rel="shortcut icon" href="/favicon.ico"/>
  <script src="//cdnjs.cloudflare.com/ajax/libs/paper.js/0.9.9/paper.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/socket.io/0.9.16/socket.io.min.js"></script>
  <title>Paper.js - Paper.js</title>
</head>
  <body class="fullscreen">
  
<div class="paperscript"><script type="text/paperscript" canvas="canvas-1">

// The amount of circles we want to make:
var count = 150;

function createDot(color) {
	var center = Point.random() * view.size;

	// Create a symbol, which we will use to place instances of later:
	var path = new Path.Circle({
		center: center,
		radius: 10,
		fillColor: color
	});

	return path;
}

var dots = [];
var colorBase = new Color('red');

// Place the instances of the dots:
for (var i = 0; i < count; i++) {	
	colorBase.hue += 1;
	var dot = createDot(colorBase);
	dot.scale(i/count);
	dots.push(dot);
}

var texts = [];

function addText(text) {
	/// Create a centered text item at the center of the view:
	var textBox = new PointText({
		point: [0,0],
		justification: 'center',
		fontSize: 30,
		fillColor: 'black',
		content: text
	});

	texts.push(textBox);
}


// Define a random point in the view, which we will be moving
// the text item towards.
var destination = Point.random() * view.size;

// The onFrame function is called up to 60 times a second:
function onFrame(event) {
	// Run through the active layer's children list and change
	// the position of the placed symbols:
	for (var i = 0; i < count; i++) {
		var item = project.activeLayer.children[i];
		
		// Move the item 1/20th of its width to the right. This way
		// larger circles move faster than smaller circles:
		item.position.x += item.bounds.width / 20;

		// If the item has left the view on the right, move it back
		// to the left:
		if (item.bounds.left > view.size.width) {
			item.position.x = -item.bounds.width;
		}
	}

	// Each frame, move the path 1/30th of the difference in position
	// between it and the destination.
	
	
	for(var i = 0; i < texts.length; i++) {
	
		// The vector is the difference between the position of
		// the text item and the destination point:
		var vector = destination - texts[i].position;

		// We add 1/30th of the vector to the position property
		// of the text item, to move it in the direction of the
		// destination point:
		texts[i].position += vector / 30;

		// If the distance between the path and the destination is less
		// than 5, we define a new random point in the view to move the
		// path to:
		if (vector.length < 5) {
			destination = Point.random() * view.size;
		}	
	}

}

var socket = io.connect('http://localhost:5000');
  socket.on('tweet', function (data) {
    console.log("Tweet: " + data);
    addText(data.text);
  });
  socket.on('sentiment', function (data) {
    console.log("Sentiment : " + data);
    
  });
  socket.on('users', function (data) {
    console.log("Users connected: " + data);
    
  });

</script>
<div class="canvas"><canvas resize="true" id="canvas-1"></canvas></div></div>
  </body>
</html>